<!DOCTYPE html>
<html>
	<head>
	  <meta charset="utf-8">
	  <title>Engine Example</title>
	</head>
	<body>
	  <script src="js/EventDispatcher.js"></script>
	  <script src="js/Surface.js"></script>
	  <script src="js/Core.js"></script>
	  <script src="js/DisplayObject.js"></script>
	  <script src="js/Scene.js"></script>
	  <script src="js/Sprite.js"></script>
	  <script src="js/CoreException.js"></script>
	  <script src="js/SceneException.js"></script>
	  <script src="js/Keyboard.js"></script>
	  <script src="js/Render.js"></script>
	  <script src="js/Tween.js"></script>
	  <script src="js/TweenGroup.js"></script>
	  <script src="js/CollisionManager.js"></script>
	  <script src="js/TextField.js"></script>
	  <script type="text/javascript">
	  	var game = new Core(300, 300, 30);
	  	game.preloadAsset('img/wizard_evil.png');
	  	game.preloadAsset('img/wizard_evil_no_bg.png');
	  	game.preloadAsset('img/bg.png');
	  	game.addEventListener('load', function(e) {
	  		var wiz = new Sprite(16,16);
			wiz.image = game.assets['img/wizard_evil_no_bg.png'];
	  		game.rootScene.addChild(wiz);
	  		//wiz.tweenGroup.moveTo(100, 50, 10, Ease.easeOutQuad).moveTo(20, 10, 5).scaleTo(2, 2, 5);
	  		wiz.tweenGroup.to(10, {x: 300, y: 150, scaleX: 2, scaleY: 2, opacity: .5}).to(10, {x: 0, y: 300, scaleX: 1, scaleY: 1, opacity: 1}).moveTo(0,0,10).setLoop(true);
	  		wiz.addEventListener('mousedown', function(e) {
	  			console.log('clicou no wiz');
	  		});

	  		var wizs = [];
	  		for (var i = 0; i < 100; i++) {
	  			var wiz2 = new Sprite(16,16);
		  		wiz2.x = Math.random() * 250;
		  		wiz2.y = Math.random() * 250;
		  		wiz2.setScaleX(Math.random() + .5);
		  		wiz2.setScaleY(Math.random() + .5);
				wiz2.image = game.assets['img/wizard_evil.png'];
		  		game.rootScene.addChild(wiz2);
		  		wizs.push(wiz2);
	  		}
	  		var txt = new TextField('meu texto', 'Arial', 30);
	  		txt.x = 150;
	  		txt.y = 150;
	  		game.rootScene.addChild(txt);

	  		var bg = new Sprite(550, 400);
	  		bg.image = game.assets['img/bg.png'];
	  		game.rootScene.addChild(bg);
	  		game.rootScene.setChildIndex(bg, 0);

	  		game.addEventListener('enterframe', function(e) {
	  			bg.x -= 2;
	  			if (bg.x < -bg.width) {
	  				bg.x = 0;
	  			}

	  			for (var i = 0; i < wizs.length; i++) {
	  				var wiz2 = wizs[i];
	  				if (wiz.boxCollides(wiz2, true)) {
		  				console.log('colidiu');
		  				wiz2.visible = false;
	  				}
	  			}
	  		});

	  		game.addEventListener('keydown', function(e) {
	  			if(Keyboard.pressedKeys[Keyboard.KEY_CODES['Right']]) {
	  				wiz.x += 5;
	  			}

	  			if(Keyboard.pressedKeys[Keyboard.KEY_CODES['Left']]) {
	  				wiz.x -= 5;
	  			}

	  			if(Keyboard.pressedKeys[Keyboard.KEY_CODES['Up']]) {
	  				wiz.y -= 5;
	  			}

	  			if(Keyboard.pressedKeys[Keyboard.KEY_CODES['Down']]) {
	  				wiz.y += 5;
	  			}
	  		});
	  	});
	  	game.init();
	  </script>
	</body>
</html>